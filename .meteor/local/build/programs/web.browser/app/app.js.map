{"version":3,"sources":["meteor://ðŸ’»app/client/main.js","meteor://ðŸ’»app/lib/collections.js"],"names":["Template","module","watch","require","v","items","Accounts","ui","config","passwordSignupFields","_dep","Deps","Dependency","body","helpers","depend","sortType","find","sort","priority","name","events","Meteor","call","changed","add","event","preventDefault","target","text","value","quantity","charAt","toUpperCase","slice","toLowerCase","$","modal","item","export","Mongo","check","Collection","methods","parseInt","userId","Error","insert","_id","String","remove","type"],"mappings":"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","file":"/app.js","sourcesContent":["import { Template } from 'meteor/templating';\nimport { items } from '../lib/collections.js';\nimport { Accounts } from 'meteor/accounts-base';\n\n// Configures the accounts package.\nAccounts.ui.config({\n    passwordSignupFields: \"USERNAME_ONLY\"\n});\n\nimport './main.html';\n\nvar _dep = new Deps.Dependency();\n\nTemplate.body.helpers({\n    items() {\n        _dep.depend();\n        if (sortType == null || sortType == \"priority\") {\n            return items.find({}, {sort: {priority: -1}});\n        }\n        else if (sortType == \"name\") {\n            return items.find({}, {sort: {name: 1}});\n        }\n    }\n});\n\nTemplate.sort.events({\n    'click .priority-sort': function() {\n        Meteor.call('setSort', \"priority\");\n        _dep.changed();\n    },\n    'click .name-sort': function() {\n        Meteor.call('setSort', \"name\");\n        _dep.changed();\n    }\n});\n\nTemplate.add.events({\n    'submit .add-form': function() {\n        event.preventDefault();\n\n        const target = event.target;\n        const name = target.text.value;\n        const quantity = target.quantity.value;\n        const priority = target.priority.value;\n\n        name = name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();\n\n        Meteor.call('items.insert', name, quantity, priority);\n\n        target.text.value = '';\n        target.quantity.value = '';\n        target.priority.value = '';\n\n        $('#addModal').modal('close');\n\n        return;\n    }\n});\n\nTemplate.item.events({\n    'click .delete-item': function() {\n        Meteor.call('items.remove', this);\n        return;\n    }\n});\n","import { Mongo } from 'meteor/mongo';\nimport { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\n\nexport const items = new Mongo.Collection(\"items\");\n\nsortType = \"priority\";\n\nMeteor.methods({\n    'items.insert'(name, quantity, priority) {\n\n        priority = parseInt(priority);\n\n        if (!Meteor.userId()) {\n            throw new Meteor.Error(\"You are not authorized to do that.\");\n        }\n\n        items.insert({\n            name,\n            quantity,\n            priority\n        });\n    },\n\n    'items.remove'(item) {\n        check(item._id, String);\n\n        items.remove(item._id);\n    },\n\n    'setSort'(type) {\n        check(type, String);\n        sortType = type;\n    }\n})\n"]}